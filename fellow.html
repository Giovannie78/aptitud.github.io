<script id="fellow-template" type="text/x-handlebars-template">
    <div class="col-xs-12 col-sm-6 col-md-4 col-lg-3 fellow">
        <div class="row default-text">
            <img src="images/medarbetare/{{img}}" class="img-responsive">

            <h4>{{name}}</h4>

            <div>{{desc}}</div>

            <div class="contact">
                {{#if email}}
                    <div><span class="glyphicon glyphicon-envelope" aria-hidden="true"></span> <a href="mailto:{{email}}" target="_top">{{email}}</a></div>
                {{/if}}
                {{#if twitter}}
                    <div><span class="glyphicon glyphicon-globe" aria-hidden="true"></span> <a href="https://twitter.com/{{twitter}}" target="_blank"> {{twitter}}</a></div>
                {{/if}}
                {{#if phone}}
                    <div><span class="glyphicon glyphicon-phone" aria-hidden="true"></span> <a href="tel:{{phone}}">{{phone}}</a></div>
                {{/if}}
            </div>
        </div>
    </div>
</script>
<div id="fellowPage" class="row">
    <div class="col-xs-offset-1 col-xs-10">
        <div id="fellow-list" class="row fellows"/>
    </div>
</div>
<script>
    function shuffle(o) {
        for (var j, x, i = o.length; i; j = parseInt(Math.random() * i), x = o[--i], o[i] = o[j], o[j] = x);
        return o;
    }

    function addClearFix(layoutDiv, index) {
        if (index != 0 && index % 4 == 0) {
            layoutDiv.append("<div class='clearfix visible-lg-block'></div>");
        }
        if (index != 0 && index % 3 == 0) {
            layoutDiv.append("<div class='clearfix visible-md-block'></div>");
        }
        if (index != 0 && index % 2 == 0) {
            layoutDiv.append("<div class='clearfix visible-sm-block'></div>");
        }
    }

    function layoutFellows(fellows) {
        var fellowTemplate = Handlebars.compile($("#fellow-template").html());
        var layoutDiv = $("#fellow-list");

        shuffle(fellows);
        fellows.forEach(function (fellow, index) {
            addClearFix(layoutDiv, index);
            layoutDiv.append(fellowTemplate(fellow));
        });
    }

    setBackgroundColor("#FF6633");
    $.getJSON("fellows.json").done(function (fellows) {
        layoutFellows(fellows);
    });

</script>
