<script id="fellow-template" type="text/x-handlebars-template">
    <div class="col-xs-12 col-sm-6 col-md-4 col-lg-3 fellow">
        <div class="row default-text">
            <img src="images/medarbetare/{{img}}" class="img-responsive">

            <h4>{{name}}</h4>

            <div>{{desc}}</div>

            <div class="contact waysOfContactList">
                <ul>
                {{#if email}}
                    <li>
                        <a href="mailto:{{email}}" target="_blank">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-envelope fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                {{/if}}
                {{#if twitter}}
                    <li>
                        <a href="https://twitter.com/{{twitter}}" target="_blank">
                        <span class="fa-stack fa-lg">
                            <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                        </span>
                        </a>
                    </li>
                {{/if}}
                {{#if phone}}
                    <li>
                        <a href="tel:{{phone}}">
                        <span class="fa-stack fa-lg">
                            <i class="fa fa-phone fa-stack-1x fa-inverse"></i>
                        </span>
                        </a>
                    </li>
                {{/if}}
                {{#if github}}
                    <li>
                        <a href="http://github.com/{{github}}" target="_blank">
                        <span class="fa-stack fa-lg">
                            <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                        </span>
                        </a>
                    </li>
                {{/if}}
                </ul>
            </div>
        </div>
    </div>
</script>
<div id="fellowPage" class="row">
    <div class="col-xs-offset-1 col-xs-10">
        <div id="fellow-list" class="row fellows"/>
    </div>
</div>
<script>
    function shuffle(o) {
        for (var j, x, i = o.length; i; j = parseInt(Math.random() * i), x = o[--i], o[i] = o[j], o[j] = x);
        return o;
    }

    function addClearFix(layoutDiv, index) {
        if (index != 0 && index % 4 == 0) {
            layoutDiv.append("<div class='clearfix visible-lg-block'></div>");
        }
        if (index != 0 && index % 3 == 0) {
            layoutDiv.append("<div class='clearfix visible-md-block'></div>");
        }
        if (index != 0 && index % 2 == 0) {
            layoutDiv.append("<div class='clearfix visible-sm-block'></div>");
        }
    }

    function layoutFellows(fellows) {
        var fellowTemplate = Handlebars.compile($("#fellow-template").html());
        var layoutDiv = $("#fellow-list");

        shuffle(fellows);
        fellows.forEach(function (fellow, index) {
            addClearFix(layoutDiv, index);
            layoutDiv.append(fellowTemplate(fellow));
        });
    }

    setBackgroundColor("#FF6633");
    $.getJSON("fellows.json").done(function (fellows) {
        layoutFellows(fellows);
    });

</script>
